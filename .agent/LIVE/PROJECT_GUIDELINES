# ğŸ“š Project Guidelines

Project-specific instructions and standards. Update this file whenever the user provides new project-level instructions.

## Status Icons

- âœ… **Required** - Must follow
- âš ï¸ **Recommended** - Should follow
- ğŸ’¡ **Best Practice** - Suggested

---

## ğŸ’» Code Standards

### TypeScript

- âœ… Use TypeScript for all code
- âœ… Define proper interfaces for component props (avoid `any`)
- âœ… Export types from type packages (`@plcl-core-types`, `@plcl-ui-types`)
- âš ï¸ Use `type` for type-only imports
- ğŸ’¡ Prefer explicit return types on functions

### React

- âœ… Use functional components with hooks (no class components)
- âœ… Use `FC<Props>` type for component definitions
- âœ… Components should support `className` prop for customization
- âš ï¸ Use `PropsWithChildren` when component accepts children
- âœ… **No native HTML components** - Use core components from `@plcl/core` instead of native HTML elements (e.g., use `Button` instead of `<button>`, `Text` instead of `<p>`, etc.)
  - Exception: Core library (`@plcl-core`) may use native components as building blocks

### Imports

- âœ… Use package names for imports, not relative paths across packages
  - âœ… `import { Button } from "@plcl/core"` 
  - âŒ `import { Button } from "../../../@plcl-core/dist"`
- âœ… Group imports: external packages â†’ internal packages â†’ relative imports
- âš ï¸ Use named exports over default exports where practical

### Styling

- âœ… Use Tailwind CSS for styling
- âœ… Support glassmorphism/glass styling via `variant` prop
- âœ… Components should support `StylingProps` for margin/padding/radius
- ğŸ’¡ Use CSS variables for theming consistency

---

## ğŸ—ï¸ Architecture

### Package Structure

```
plcl/
â”œâ”€â”€ @plcl-core/          # Core UI component library
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/  # React components (45+)
â”‚       â”œâ”€â”€ hooks/       # Shared hooks (useTheme)
â”‚       â”œâ”€â”€ styles.css   # Global styles
â”‚       â””â”€â”€ index.ts     # Public exports
â”œâ”€â”€ @plcl-core-types/    # Type definitions for core
â”œâ”€â”€ @plcl-ui/            # Desktop UI layer
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/  # Shell, Window, Settings, Search, etc.
â”‚       â”œâ”€â”€ hooks/       # Desktop-specific hooks
â”‚       â””â”€â”€ index.ts     # Public exports (Shell, IFrameApp)
â”œâ”€â”€ @plcl-ui-types/      # Type definitions for desktop UI
â”œâ”€â”€ docs/                # Documentation website
â””â”€â”€ playground/          # Development playground
```

### Separation of Concerns

| Package | Responsibility |
|---------|---------------|
| `@plcl-core` | Core UI components (Button, Card, Input, etc.) + Theme |
| `@plcl-ui` | Desktop UI (Shell component with all variants) |
| `*-types` | Standalone type definitions |

### Key Architectural Rules

- âœ… **Theme lives in `@plcl-core`** - ThemeProvider, useTheme hook
- âœ… **Shell component lives in `@plcl-ui`** - Single component with 6 variants
- âœ… **Desktop-specific hooks stay in `@plcl-ui`** - useDesktopLayout, useFooter, useIconSize, useWallpaper
- âœ… **Type packages are separate** - Allows consumers to import types without the full library

### Shell Component Variants

| Variant | Use Case |
|---------|----------|
| `desktop` | Full desktop environment with windows, dock, wallpaper |
| `app` | Standard app layout with header/main/footer |
| `page` | Simple page layout |
| `sidebar` | Layout with sidebar navigation |
| `web` | Iframe wrapper for external URLs |
| `window` | Individual draggable/resizable window |

### Package Dependencies

```
@plcl-core-types â†’ (standalone)
@plcl-core â†’ depends on @plcl-core-types
@plcl-ui-types â†’ (standalone)
@plcl-ui â†’ depends on @plcl-core, @plcl-ui-types
docs â†’ depends on @plcl-core, @plcl-ui
playground â†’ depends on @plcl-core, @plcl-ui
```

---

## ğŸ”„ Development Workflow

### Build Order

1. `@plcl-core-types` (types first)
2. `@plcl-core` (core library)
3. `@plcl-ui-types` (UI types)
4. `@plcl-ui` (desktop layer)
5. `docs` / `playground` (applications)

### Commands

```bash
# Build types first, then core library
npm run build:types    # Builds @plcl-core-types
npm run build:lib      # Builds @plcl-core

# Development mode (all packages concurrently)
npm run dev

# Lint and format
npm run lint
npm run format
```

### Quality Checks

- âœ… Run lint before committing
- âœ… Ensure all builds pass
- âœ… Fix all TypeScript errors
- âš ï¸ Test in playground before merging

---

## âŒ Common Pitfalls

### Import Paths

- âŒ Don't use relative paths across packages: `../../../@plcl-core/dist`
- âœ… Use package names: `@plcl/core`

### Package.json Dependencies

- âŒ Don't use incorrect folder paths: `file:../core`
- âœ… Use actual folder names: `file:../@plcl-core`

### Theme Hook Usage

- âŒ Don't create duplicate theme hooks in `@plcl-ui`
- âœ… Import `ThemeProvider` and `useTheme` from `@plcl/core`

### Shell Component

- âŒ Don't put Shell in `@plcl-core` (it has desktop-specific dependencies)
- âœ… Shell lives in `@plcl-ui` with all its variants

### Custom Apps

- âœ… Use `customApps` prop on Shell's desktop variant
- âœ… Each app needs: `id`, `title`, `icon`, `Component`
- âœ… Component must accept `AppWindowProps`: `isOpen`, `handleClose`, `zIndex`, `onFocus`, `resetKey`

---

## ğŸ“¦ @plcl-ui Exports

```typescript
// Main export
export { Shell } from "./components/Shell";
export type { ShellProps, ShellVariant, ShellItemProps } from "./components/Shell";

// Utility
export { IFrameApp } from "./components/IFrameApp";
```

### Internal Components (not exported)

- `Window` - Used internally by Shell and custom apps
- `WindowManager` - Manages multiple windows
- `Settings` - Built-in settings app
- `Search` - App search overlay
- `Desktop`, `Wallpaper`, `Apps` - Desktop environment internals

---
